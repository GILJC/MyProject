옛날엔 VMware가 빨랐지만,
이젠 하드웨어 성능의 발달로 버추얼박스도 충분히 빨라졌다고 하는데, 난 모르겠음..


설치.
https://www.virtualbox.org/wiki/Downloads

VirtualBox 6.1.26 platform packages
 Windows hosts  (https://download.virtualbox.org/virtualbox/6.1.26/VirtualBox-6.1.26-145957-Win.exe)


2.
VirtualBox 6.1.26 Oracle VM VirtualBox Extension Pack
 All supported platforms
(https://download.virtualbox.org/virtualbox/6.1.26/Oracle_VM_VirtualBox_Extension_Pack-6.1.26.vbox-extpack)

3.
2번에서 받은 확장을 등록
파일 -> 환경 설정 -> (왼쪽의)확장 -> 2번에서 받은거 추가하고 확인
(하면 설치됨)


4. Ubuntu LTS Desktop 버전 다운
Ubuntu 20.04.3 LTS
https://ubuntu.com/download/desktop/thank-you?version=20.04.3&architecture=amd64


5. 다 받았으면
새로 만들기(N)
이름: GIL,
머신 폴더: D:\GIL_1_sub\VBox
종류: Linux
버전: Ubuntu (64-bit)

메모리 크기 : 8192
(자기 렘 절반 크기 : 8GB)

하드 만들기는 그냥 통과(2,3번) = vdi, 동적 할당


파일 위치 및 크기
D:\GIL_1_sub\VBox\GIL\GIL.vdi

여유가 없으면 30GB  (하둡 쓰려면 최소 30기가 필요)
여유 있으면 50GB
(난 50GB 함)

이걸로 완료.

0.
아까 받은 Ubuntu.iso 파일 넣고 실행 -> 설치 시작

언어; 한국어

키보드
: 건들거 없이 Enter
(전에 여기서 위에걸로 바꿨던거 같은데...)


업데이트 및 기타 소프드웨어
(여기서 확인칸이 안보이니까)
[(취소, 돌아가기, 확인) 버튼 순.  맨 아래칸에서 텝 3번하고 엔터]


어디에 거주? -> 서울 -> 엔터
(여기선 텝 2번.  3번 하면 안됨) 그리고 엔터

이름 적고, Tab1번 Enter
그러면 설치됨

(이름은 GIL로 해도, 실제 이름은 소문자 gil로 알아서 바뀜)
gil
1


[처음부터 English로 설치하면 버튼이 잘 보임]
[그러니 영어로 설치 -> 한글로 변경]
[으로 작업 가능]



설치 완료됐으면 -> CD 빼고 시작
할 필요 없는듯. 보니까 CD 빼져있음. 걍 시작하면 될듯


켜졌으면, 기본설정으로 다 넘기고(중간에 정보 보내기는 안하는걸로 바꾸고) 완료.

업데이트는 지금 안함. 나중에 함




-------------------------
사전작업 해야할것

1.
터미널 실행
sudo apt update
-> 하면 목록갱신을 해줌


2. 
최신 목록을 
최신 버전으로 버전업
sudo apt upgrade

[위 2 작업은 1,2달에 한번씩 해줘야 함]



=========
일단 3가지 설치할 것.

1. 
sudo apt install gcc
(GNU C Compiler 설치할 것)

2.
C++ 컴파일러 설치  ->  ?  -> g++ 컴파일러인데?  설명 제대로 한거 맞음?
sudo apt install g++


3.
sudo apt install make
make가 뭔진 나중에 설명, 일단 설치


[4]?
다 설치했으면 가상머신 메뉴에서
장치 -> 게스트 확장 CD 이미지 삽입 -> 누르고 설치
이거 설치하기 위해 위의 1,2,3 설치 미치 한 것



설치 다 했으면 power off로 전원 끄고
VM관리자에서 
저장소 우클릭 -> CD 제거



[][][][][][][][][][][][][][][][][][][][]

키보드 한글 방법

설정 -> 지역 및 언어 -> 한국어 (Hangul)

101/111인가 뭔가는 안쓰니까 지워버려도 됨
안지웠을 경우는 우측 상단에 언어버튼 클릭후 -> 한국어로 설정


터미널에서
Shift + Space로   한/영 변경 가능


[][][][][][][][][][][][][][][][][][][][]





ssh 서버 설치 확인

sudo apt install openssh-server

설치가 안되어있다는 소리
y -> 설치


sudo systemctl status ssh

(vi 로 돼서 -> q로 나갈 수 있음)


cd /etc
cd ssh

ssh 열기
vi ssh


sudo vi sshd_config

Port 22
PubkeyAuthen~~ yes
PasswordAuthentication  yes

이렇게 3개 수정하고 저장, 나가기

sudo systemctl restart ssh


이렇게 ssh 설정 끝


이걸 접속하려면 방화벽에 등록해줘야함
sudo ufw allow ssh
(ssh서비스를 방화벽이 외부에서 접속할 수 있게 해줌)


- 이제 테스트 해줄것
ifconfig -> 안됨

sudo apt install net-tools

ifconfig -> inet 10.0.2.15  -> 가상머신의 가상의 ip

포트포워딩 해야함

VBox관리자 설정 -> 네트워크 -> 고급 -> 포트포워딩
-> 오른쪽에 + -> 이름 Ubuntu ssh (난 GIL ssh 로 함)  -> 호스트 ip 127.0.0.1 (자기 자신을 뜻함)
 -> 포트 충돌나면 안되니까 2200으로 함.
-> 윈도우에서 2200번 포트로 들어오면 -> 10.0.2.15로 게스트 ip를, -> 22번 포트로 대신 접속해줘라 하는 것



윈도우 자체 ssh 내장되어있음
터미널 실행

(ssh lastcoder@localhost -p 2200)
ssh gil@localhost -p 2200
그리고 yes  (처음 접속, 신뢰하냐? 라는 뜻)
pw: 1

이러면 접속 됨


--------------------------

작업폴더 만듬
/home(=gil) 에서
mkdir work

일반적으로 외장 ~~를 붙일 땐
/mnt 에 붙임


[윈도우에서 공유폴더 만듬]
D:\GIL_1_sub\Linux-share

마운트 설정
vbox 관리 -> 설정 -> 우측, 공유 폴더 -> 오른쪽 +(=공유 추가)
-> 폴더 경로 : 위의 윈도우 폴더 => D:\GIL_1_sub\Linux-share
[아래 자동 마운트(A)에 체크 선택]
-> 마운트 지점: /mnt/share
[확인] 버튼으로 완료
(windows 내에서의 폴더 이름과 ubuntu에서의 폴더 이름이 같을 필요는 전혀 없다)

완료했으면 우분투 재시작
-> reboot

윈도우 터미널 접속종료됐으니 다시 접속
ssh gil@localhost -p 2200
1

cd /mnt
ls -l
(여기서 share 폴더 확인 가능)
근데 cd share하면 허가 거부로 접속 안됨


sudo usermod -G vboxsf -a gil
vboxsf 계정을 append 해주겠다, 내 게정(gil)에
1

append 해줬으면 한번 더 reboot
sudo reboot

로그인하고
cd /mnt/share
하면 들어가짐

()()()()()
(설정에서 항상 사용 해주면 항상 설정 되어있음)

(허가 거부일때)
[gil@~]cd /mnt/share
-bash: cd: /mnt/share: 허가 거부
[gil@~]sudo chmod 775 /mnt/share/


cd /mnt/share로 이동
해야하는데,  마운트 자동으로 하니까
/media/sf머시기 폴더에 마운트됨

[gil@~]cd /media/sf_Linux-share/
[gil@sf_Linux-share]ls
 protobuf-2.5.0.tar.gz  'test(hadoop_setting_original=before_fix).xml'   test.xml

()()()()()

(마운트 위치를 /mnt/share 로 하니까 허가 거부 안뜬다고 함)

()()()()()()

sudo usermod -G vboxsf -a 계정
(이거 해야지 공유폴더 접근 가능하다는데)

()()()()


===========================
window와 ubuntu의 공유폴더 생성 완성
===========================

윈도우에서
업로드한 파일
test.xml
다운 받고

D:\GIL_1_sub\Linux-share
로 이동

터미널에서
ls -l 하면 보임

mv test.xml ~/work
로 이동

ubuntu에서
cd work
sudo vi test.xml


:g/(Ctrl누른 상태에서vm)/s//g
(  :g/^M/s//g  )  <- 이렇게 됨
엔터

저장하고 나옴
:wq

(우분투 역할은 다함)


-----------------
윈도우 터미널로 다시 이동

[vi 명령어]

저장, 종료
:wq

대문자ZZ : 저장하고 종료


r -> 한글자만 수정

R -> replace -> 여러글자 수정

5x  -> 5개 날라감


undo => u


w : 단어 단위로 다음으로 이동


a: 글자 입력 (append)

$: 맨 뒤로 이동

o: 줄 추가 입력

dd: (원하는곳에 가서)줄 삭제,  (삭제 겸 잘라내기 기능)
4dd : 4줄 잘라내기

p: 붙여넣기

yy : 복사
2yy: 2줄 복사

Ctrl + b, f  -> 페이지 단위로 이동
Ctrl + g -> 파일명, 위치 등 정보 알려 줌


라인번호 버고싶을때(vi 내부에서)
:se nu
:se nonu

10~18번 라인 지운다
:10, 18d

현재부터 18번까지 지운다 (현재 라인에 만약 커서가 있다면)
:., 18d


첫라인은 무조건 1, 마지막 라인은 모름
마지막 라인은 무조건 $ 로 표시
현재부터 마지막 라인까지 삭제
:.,$d


전부 삭제
:1,$d


value 검색
/value
하고 n 누르면 검색
위로 검색은 N

name 검색은
/name


쩜.
가장 최근에 한 작업을 저장


문서 전체에(g)서 특정 단어(value)를 찾아서 지우고(/s) 특정 단어(values)로 문서 전체에서(/g) 바꿈
:g/value/s//values/g

s다음은 항상 // 2개

그냥 치면 -> 현재 커서부터
문서 전체를 하려면 global을 줘야 함 -> /g



위의 4줄, 밑의 1줄 복사해서
다른 파일에 넣기
-> buffer에 복사한걸 넣어야함
버퍼는 a~z까지 지원
더블 쿼테이션"" 을 써야함

위에 4줄 a에 넣고
아래 1줄 b에 넣을거임

커서 위치로 이동해서
:"a엔터
4yy

:"b엔터
yy

:e test.xml
-> vi 안나가고 다른vi로 이동
(기존건 열린채)

여기서 맨 아래에 붙이기
맨 아래로 커서 이동해서
:"ap
:"bp
하면 a,b 버퍼에 있던 내용 붙여넣기 됨




붙이기 모드
:se paste
(이거 키면 Ctrl+v로 붙이기 할 수 있음)

붙이기 모드 끄기
:se nopaste



대문자 G를 치면
항상 맨 밑으로 감



라인을 붙이고 싶을때,
J
붙이고 싶은 라인에 커서들 두고  J(대문자) 입력하면 붙음
BEGIN{print"<sum of files>"} {sum+=$5} END{print sum/NR}
대신 1칸이 띄어짐


---
vi 명령어

물결 (~)  로 통과시키면
대문자는 소문자로 , 소문자는 대문자로
변경 됨

then  --( ~ )->  THEN
Usage	        uSAGE



-------------------------
.파일명 -> 숨김파일

vi ../.vinmrc
.c파일 수정할때 기본사항 적용

set cindent
set tabstop=4
set shiftwidth=4
set expandtab

(자동 들여쓰기)



--------

단어를 찾아라, replication을, test.xml 이란 파일에서
grep replication text.xml
(특정 파일 안에 특정 단어를 찾기)

cat test.xml
뿌리기..

보통 2개를 같이 pipe로 연결해서 같이 씀

cat test.xml | grep replication


폴더 내에서, 특정 단어를 가진 파일 찾기
ls -l test*
(test로 시작하는 단어)
같은 방법 grep으로
 ls -l | grep 't*'


/etc/passwd/
유저 정보

cat /etc/passwd | grep gil
내 유저 정보 출럭

리눅스 기본 shell은
/bin/bash에 있음




chmod -> 남이 읽을 수 있게
(읽기 / 쓰기 / 실행)
(  4  /   2   /   1   )
chmod 754 test.xml



------------------------------------------------------------------ 쉬는시간.  여기부턴 링크 거는 법

.swp <- 이게 Ctrl+z했을때 실행하면 이상한거 뜨는 이유

window의 되돌리기
Ctrl + z
누르면
-> 백그라운드 작업으로 돌리기

jobs 치면 나옴

fg
를 치면 다시 실행됨.

당황해서 파일을 2개나 실행하면
jobs
치면 2개 나옴
[1]-  멈춤
[2]+  멈춤

fg
치면 맨 아래것만 나옴

fg %1
로 원하는거 선택할 수 있음


---

ps -ef
이러면 프로세스 다나와서 엄청 많이 나옴

ps -ef | grep vi
vi관련 프로세스만 나옴

/usr/~~/~~vi~~/
/usr/~~
이런건 말고
vi test.xml  -> 이게 실행중인거


kill -9 2440
프로세스 죽이기 -> 2440 -> 프로세스 번호 확인하고 죽일걸로 바꾸면 됨


-----------링크 설명

 소프트 링크 달기
ln -s work/source/test3.xml test
(ln -s 원본주소 링크파일이름)


----
터미널에서 사용자 이름 너무 길어서 줄이고 싶을때

(gil/.bashrc 파일이 우분투에서 자동으로 실행되는 설정)

vi .bashrc

G로 제일 아래 가서
o로 다음줄에 다음을 추가
PS1="[\u@\W]"

source .bashrc
로 적용(재시작)

그럼 터미널에서의 이름이

gil@gil-VirtualBox:~$
에서
[gil@~]

로 변경됨

(단점. 색도 녹색 -> 흰색) 으로 변경됨




--------------

묶을때는 묻지 말고 cvf 쓰면 됨

tar cvf '압축이름.tar' '압풀할 폴더 또는 파일'

.tar를 쓰는 이유는 나중에 구분하기 쉽게 하기 위하여.

work를 work로 묶어보자
tar cvf work.tar work

work 삭제
rm -R work

묶음 풀기
tar xvf work.tar

----

묶음과 동시에 압축까지 하기

tar zcvf work.tar work

work 폴더 지우고
rm -R work

압축 풀기
tar zxvf work.tar


--
(정석)
다른사람도 알수있게 .gz표시  => 압축해서 tar로 묶었다고 표시
tar zcvf work.tar.gz work


[윈도우와 다르게 점(.)뒤에 오는건 의미가 없다. 관례상 tar로 묶은건 .tar.gz를 주는것 뿐] -> 확장자의 기능이 아니다

압축 풀기
tar zxvf work.tar.gz





--------------------





[우분투 바탕화면에서 좌측 하단 전체 메뉴 들어가서]
[소프트웨어 업데이터 클릭하면] -> 업데이트 됨

-> 이거 가끔 하면 좋음 -> 버그수정이나 업데이트등 해줌



(참고)
설정 - 일반 - 고급 - 클립보드 -> 양방향